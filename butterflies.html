<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AR.js experiment</title>
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

        <script>
            window.onload = () => {
                let scene = document.querySelector(".scene");

                function getRandom(min = 0, max = 100) {
                    let difference = max - min;
                    let rand = Math.random();

                    rand = Math.floor(rand * difference);
                    rand = rand + min;
                    return rand;
                }

                [...Array(25)].forEach((i) => {
                    var butterfly = document.createElement("a-entity");
                    butterfly.setAttribute("gltf-model", "#butterfly");
                    butterfly.setAttribute("animation-mixer", `duration:${(Math.random() + 5) / 10}`);
                    butterfly.setAttribute("position", `${getRandom(-2, 2)} ${getRandom(-1, 7)} -${getRandom(10, 15)}`);
                    butterfly.setAttribute("rotation", `${getRandom(-2, 2)} ${getRandom(-2, 2)} ${getRandom(-2, 2)}`);
                    scene.appendChild(butterfly);
                });
            };
        </script>
    </head>

    <body style="margin: 0; overflow: hidden">
        <a-scene class="scene" embedded vr-mode-ui="enabled: false" arjs="trackingMethod:best; sourceType: webcam; debugUIEnabled: false;">
            <a-assets>
                <a-asset-item id="butterfly" src="./butterfly2/scene.gltf"></a-asset-item>
            </a-assets>

            <!--    <a-entity-->
            <!--            class="butterfly"-->
            <!--            gltf-model="#butterfly"-->
            <!--            animation-mixer-->
            <!--            scale="1 1 1"-->
            <!--            position="0 0 -10"-->
            <!--    ></a-entity>-->

            <!--
        rotation-reader is active by default (this makes it possible to rotate phone and object stays fixed)
        look-controls="touchEnabled: false;" disables look-controls via touch gestures
        (look-controls="enabled: false;" seems to break rotation-reader)
    -->
            <a-camera look-controls="touchEnabled: false;"></a-camera>
        </a-scene>
    </body>
</html>
